{% extends "dash/dashboard.html" %}

{% block main_content %}
    <h2>Connections</h2>

    {% if form is defined %}

        <div class="dashboard-form">
            <form method="POST" action="{{ url_for('create_connection') }}" enctype="multipart/form-data">
                {{ form.csrf_token }}
                <div class="form-group">
                    <fieldset class="form-field">
                        {{ form["conn_name"].label }}
                        {{ form["conn_name"](class_="form-control") }}
                    </fieldset>
                </div>
                <div class="form-group">
                    <fieldset class="form-field">
                        {{ form.conn_strategy.label }}
                        {{ form.conn_strategy(class_="form-control") }}
                    </fieldset>
                </div>
                <div class="form-group">
                    <fieldset class="form-field">
                        {{ form.sign_req_algo.label }}
                        {{ form.sign_req_algo(class_="form-control") }}
                    </fieldset>
                </div>
                <div class="form-group">
                    <fieldset class="form-field">
                        {{ form.sign_req_digest.label }}
                        {{ form.sign_req_digest(class_="form-control") }}
                    </fieldset>
                </div>
                <div class="form-group">
                    <fieldset class="form-field">
                        {{ form.signin_url.label }}
                        {{ form.signin_url(class_="form-control") }}
                    </fieldset>
                </div>
                <div class="form-group">
                    <fieldset class="form-field">
                        {{ form.x509_cert.label }}
                        {{ form.x509_cert(class_="btn btn-outline-primary file-selector") }}
                    </fieldset>
                </div>
                <div class="form-group">
                    <fieldset class="form-field">
                        {{ form.assign_membership_on_login.label }}
                        {{ form.assign_membership_on_login(class_="radio-control") }}
                    </fieldset>
                </div>
                {{ form.submit(class_="btn btn-primary") }}
            </form>
        </div>
    {% endif %}

    {% if data is defined and {% if data|length > 0 %}

        <table class="table-responsive table-striped table-sm">
            <thead>
                <tr>
                    <th>Key</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                {% for key, value in data.items() %}
                    <tr>
                        <th scope="row" class="profile-key">{{ key|e }}</th>
                        <td class="profile-value">{{ value|e }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endblock %}
